<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>WebGPU Projekt</title>
        <link rel="icon" href="data:;base64,iVBORwOKGO=" />
        <style>
        html,
        body {
            margin: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            color: #c0c0c0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: "Courier New", Courier, monospace;
        }

        canvas {
            max-width: 80%;
            max-height: 80%;
            width: auto;
            height: auto;
            border: 2px solid #333;
            margin-top: 3%;
        }

        .inputs {
            position: absolute;
            display: flex;
            flex-direction: column;
            display: none;
            gap: 1em;
            background: #2a2a2a;
            padding: 1em;
            border: 1px solid #333;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: move;
            z-index: 1000;
        }
        .slider-control, .checkbox-control {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.5em;
        }

        .slider-control label, .checkbox-control label {
            flex: 1;
            font-size: 0.8em;
            color: #fff;
        }

        .slider-control input[type="range"] {
            flex: 2;
        }

        .slider-control span, .checkbox-control input {
            flex: 1;
            font-size: 0.8em;
            color: #fff;
        }

        .control-group span {
            font-size: 1em;
            color: #f7f308;
            margin-bottom: 0.5em;
            display: block;
        }

        .close-btn {
            position: absolute;
            top: 5px;
            right: 10px;
            background: #ff4d4d;
            border: none;
            color: white;
            padding: 0.2em 0.5em;
            cursor: pointer;
            border-radius: 3px;
        }

        .settings-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #2a2a2a;
            border: 1px solid #333;
            color: white;
            padding: 0.5em 1em;
            cursor: pointer;
            border-radius: 5px;
            z-index: 1001;
        }

        .time-container {
            display: flex;
            justify-content: space-between;
            width: 80%;
            margin-top: 20px;
            background: #2a2a2a;
            padding: 10px;
            border: 1px solid #333;
        }

        .time-item {
            flex: 1;
            text-align: center;
            margin: 0 10px;
        }

        h3 {
            margin: 0;
            color: #f5a623;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        span {
            font-size: 1.2em;
        }
        </style>
    </head>

    <body>
        <button class="settings-btn" id="settingsBtn">Settings</button>

        <div class="inputs" id="draggable">
            <button class="close-btn" id="closeBtn">X</button>
            <div class="control-group">
                <span>Scene Properties</span>
                <div class="slider-control">
                    <label for="bounces">Bounces</label>
                    <input id="bounces" type="range" min="1" max="32" step="1"
                        value="8" />
                    <span id="bouncesValue">8</span>
                </div>
                <div class="slider-control">
                    <label for="samples">Samples</label>
                    <input id="samples" type="range" min="1" max="32" step="1"
                        value="1" />
                    <span id="samplesValue">1</span>
                </div>
                <div class="slider-control">
                    <label for="jitter">Jitter</label>
                    <input id="jitter" type="range" min="0.1" max="10"
                        step="0.1" value="1.0" />
                    <span id="jitterValue">1.0</span>
                </div>
                <div class="slider-control">
                    <label for="fov">FOV</label>
                    <input id="fov" type="range" min="60" max="220" step="5"
                        value="135" />
                    <span id="fovValue">135</span>
                </div>
                <div class="slider-control">
                    <label for="focusDist">Focus Distance</label>
                    <input id="focusDist" type="range" min="1" max="50"
                        step="0.1" value="4.0" />
                    <span id="focusDistValue">4.0</span>
                </div>
                <div class="slider-control">
                    <label for="apertureSize">Aperture Size</label>
                    <input id="apertureSize" type="range" min="0.001" max="0.5"
                        step="0.001" value="0.005" />
                    <span id="apertureSizeValue">0.005</span>
                </div>
                <div class="slider-control">
                    <label for="vignetteStrength">Vignette Strength</label>
                    <input id="vignetteStrength" type="range" min="0.0"
                        max="1.0" step="0.1" value="0.5" />
                    <span id="vignetteStrengthValue">0.5</span>
                </div>
                <div class="slider-control">
                    <label for="vignetteRadius">Vignette Radius</label>
                    <input id="vignetteRadius" type="range" min="0.1" max="2.0"
                        step="0.1" value="0.75" />
                    <span id="vignetteRadiusValue">0.75</span>
                </div>
                <div class="checkbox-control">
                    <label for="backfaceCulling">Backface Culling</label>
                    <input id="backfaceCulling" type="checkbox" checked />
                </div>
                <div class="checkbox-control">
                    <label for="skyTexture">Sky Texture</label>
                    <input id="skyTexture" type="checkbox" />
                </div>
            </div>
        </div>

        <div class="time-container">
            <div class="time-item">
                <h3>Triangles:</h3>
                <span id="triangles"></span><span> triangles</span>
            </div>
            <div class="time-item">
                <h3>Accumulated Frames:</h3>
                <span id="render-time"></span><span> frames</span>
            </div>
            <div class="time-item">
                <h3>Frame Rate:</h3>
                <span id="frame-time"></span><span> fps</span>
            </div>
        </div>
        <script src="./dist/main.bundle.js"></script>
        <script>
            const settingsBtn = document.getElementById('settingsBtn');
            const closeBtn = document.getElementById('closeBtn');
            const draggable = document.getElementById('draggable');
    
            settingsBtn.addEventListener('click', () => {
                draggable.style.display = 'flex';
            });
    
            closeBtn.addEventListener('click', () => {
                draggable.style.display = 'none';
            });
    
            let isDragging = false;
            let startX, startY, initialX, initialY;
    
            draggable.addEventListener('mousedown', (e) => {
                if (e.target === closeBtn) return;
                isDragging = true;
                startX = e.clientX;
                startY = e.clientY;
                initialX = draggable.offsetLeft;
                initialY = draggable.offsetTop;
                draggable.style.cursor = 'grabbing';
            });
    
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const dx = e.clientX - startX;
                    const dy = e.clientY - startY;
                    draggable.style.left = initialX + dx + 'px';
                    draggable.style.top = initialY + dy + 'px';
                }
            });
    
            document.addEventListener('mouseup', () => {
                isDragging = false;
                draggable.style.cursor = 'move';
            });
    
            // Update range input values display
            const bounces = document.getElementById('bounces');
            const bouncesValue = document.getElementById('bouncesValue');
            bounces.addEventListener('input', () => bouncesValue.textContent = bounces.value);
    
            const samples = document.getElementById('samples');
            const samplesValue = document.getElementById('samplesValue');
            samples.addEventListener('input', () => samplesValue.textContent = samples.value);
    
            const fov = document.getElementById('fov');
            const fovValue = document.getElementById('fovValue');
            fov.addEventListener('input', () => fovValue.textContent = fov.value);
    
            const jitter = document.getElementById('jitter');
            const jitterValue = document.getElementById('jitterValue');
            jitter.addEventListener('input', () => jitterValue.textContent = jitter.value);
        </script>
    </body>

</html>
